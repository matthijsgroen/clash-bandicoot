/*! For license information please see ui-components-composition-Village-PlacementOutline-stories.c7f4f600.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkcoc_simulator=self.webpackChunkcoc_simulator||[]).push([[305],{"./node_modules/@babel/runtime/helpers/esm/defineProperty.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return _defineProperty}});var esm_typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/typeof.js");function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==(0,esm_typeof.Z)(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==(0,esm_typeof.Z)(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===(0,esm_typeof.Z)(key)?key:String(key)}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}},"./node_modules/@babel/runtime/helpers/esm/objectSpread2.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return _objectSpread2}});var _defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}},"./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_require__.d(__webpack_exports__,{Z:function(){return _objectWithoutProperties}})},"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}__webpack_require__.d(__webpack_exports__,{Z:function(){return _slicedToArray}})},"./node_modules/@babel/runtime/helpers/esm/typeof.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}__webpack_require__.d(__webpack_exports__,{Z:function(){return _typeof}})},"./node_modules/classnames/index.js":function(module,exports){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg)){if(arg.length){var inner=classNames.apply(null,arg);inner&&classes.push(inner)}}else if("object"===argType){if(arg.toString!==Object.prototype.toString&&!arg.toString.toString().includes("[native code]")){classes.push(arg.toString());continue}for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}}return classes.join(" ")}module.exports?(classNames.default=classNames,module.exports=classNames):void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},"./src/ui-components/composition/Village/PlacementOutline.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PlacementOutline:function(){return PlacementOutline_stories_PlacementOutline},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return PlacementOutline_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Grid=__webpack_require__("./src/ui-components/composition/Village/Grid.tsx"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),PlacementOutline_module={outline:"PlacementOutline_outline__EK09Q",size1:"PlacementOutline_size1__jSK5+",size2:"PlacementOutline_size2__LB4XN",size3:"PlacementOutline_size3__qetT4",size4:"PlacementOutline_size4__iEUMD",outlineBox:"PlacementOutline_outlineBox__ciU4c",dark:"PlacementOutline_dark__t2mRV",light:"PlacementOutline_light__T8L18"},classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),buildingStore_buildingStore=function createBuildingStore(){var buildings=[],limits=[];return{addBuilding:function addBuilding(building){buildings.push(building)},getBuilding:function getBuilding(type,level){return buildings.find((function(b){return b.type===type&&b.level===level}))},setBuildingLimit:function setBuildingLimit(type,amount,thLevel){limits.push({thLevel:thLevel,type:type,amount:amount})},getMaxBuildingAmount:function getMaxBuildingAmount(thLevel,type){var limit=0;return limits.forEach((function(e){thLevel>=e.thLevel&&type===e.type&&e.amount>limit&&(limit=e.amount)})),limit},getMaxBuildingLevel:function getMaxBuildingLevel(thLevel,type){var level=0;return buildings.forEach((function(building){thLevel>=building.thRequirement&&type===building.type&&building.level>level&&(level=building.level)})),level}}}(),esm_typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/typeof.js");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _wrapRegExp(){_wrapRegExp=function _wrapRegExp(re,groups){return new BabelRegExp(re,void 0,groups)};var _super=RegExp.prototype,_groups=new WeakMap;function BabelRegExp(re,flags,groups){var _this=new RegExp(re,flags);return _groups.set(_this,groups||_groups.get(re)),_setPrototypeOf(_this,BabelRegExp.prototype)}function buildGroups(result,re){var g=_groups.get(re);return Object.keys(g).reduce((function(groups,name){var i=g[name];if("number"==typeof i)groups[name]=result[i];else{for(var k=0;void 0===result[i[k]]&&k+1<i.length;)k++;groups[name]=result[i[k]]}return groups}),Object.create(null))}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(BabelRegExp,RegExp),BabelRegExp.prototype.exec=function(str){var result=_super.exec.call(this,str);if(result){result.groups=buildGroups(result,this);var indices=result.indices;indices&&(indices.groups=buildGroups(indices,this))}return result},BabelRegExp.prototype[Symbol.replace]=function(str,substitution){if("string"==typeof substitution){var groups=_groups.get(this);return _super[Symbol.replace].call(this,str,substitution.replace(/\$<([^>]+)>/g,(function(_,name){var group=groups[name];return"$"+(Array.isArray(group)?group.join("$"):group)})))}if("function"==typeof substitution){var _this=this;return _super[Symbol.replace].call(this,str,(function(){var args=arguments;return"object"!=(0,esm_typeof.Z)(args[args.length-1])&&(args=[].slice.call(args)).push(buildGroups(args,_this)),substitution.apply(this,args)}))}return _super[Symbol.replace].call(this,str,substitution)},_wrapRegExp.apply(this,arguments)}var time=function time(timeStr){var _match$groups$seconds,_match$groups,_match$groups$minutes,_match$groups2,_match$groups$hours,_match$groups3,_match$groups$days,_match$groups4,match=timeStr.match(_wrapRegExp(/^((\d+)d)?((\d+)h)?((\d+)m)?((\d+)s)?$/,{days:2,hours:4,minutes:6,seconds:8}));return parseInt(null!==(_match$groups$seconds=null==match||null===(_match$groups=match.groups)||void 0===_match$groups?void 0:_match$groups.seconds)&&void 0!==_match$groups$seconds?_match$groups$seconds:"0",10)+60*parseInt(null!==(_match$groups$minutes=null==match||null===(_match$groups2=match.groups)||void 0===_match$groups2?void 0:_match$groups2.minutes)&&void 0!==_match$groups$minutes?_match$groups$minutes:"0",10)+60*parseInt(null!==(_match$groups$hours=null==match||null===(_match$groups3=match.groups)||void 0===_match$groups3?void 0:_match$groups3.hours)&&void 0!==_match$groups$hours?_match$groups$hours:"0",10)*60+60*parseInt(null!==(_match$groups$days=null==match||null===(_match$groups4=match.groups)||void 0===_match$groups4?void 0:_match$groups4.days)&&void 0!==_match$groups$days?_match$groups$days:"0",10)*60*24};[[250,200,"5m",20,1],[270,2e3,"15m",30,2],[290,1e4,"2h",35,3],[310,1e5,"5h",40,4],[330,25e4,"8h",45,5],[350,75e4,"12h",50,6],[400,15e5,"2d",55,9]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,5),hitPoints=_ref2[0],cost=_ref2[1],timeStr=_ref2[2],capacity=_ref2[3],th=_ref2[4];buildingStore_buildingStore.addBuilding({type:"armycamp",categories:["army"],level:1+lvl,size:[4,4],thRequirement:th,hitPoints:hitPoints,cost:{type:"elixir",amount:cost,time:time(timeStr)},aiSettings:{capacity:capacity}})})),[[1,1],[2,3],[3,5],[4,7]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("armycamp",amount,th)}));[[250,100,"10s",1],[290,500,"2m",1],[330,2500,"10m",1],[370,5e3,"1h",2],[420,2e4,"8h",3],[470,12e4,"12h",4],[520,27e4,"18h",5],[580,8e5,"1d",6],[650,12e5,"1d12h",7],[730,17e5,"2d12h",8],[810,26e5,"4d",9]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,4),hitPoints=_ref2[0],cost=_ref2[1],timeStr=_ref2[2],th=_ref2[3];buildingStore_buildingStore.addBuilding({type:"barracks",categories:["army"],level:1+lvl,size:[3,3],thRequirement:th,hitPoints:hitPoints,cost:{type:"elixir",amount:cost,time:time(timeStr)},aiSettings:{}})})),[[1,1]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("barracks",amount,th)})),buildingStore_buildingStore.addBuilding({type:"builderhut",categories:[],level:1,thRequirement:1,size:[2,2],hitPoints:250,cost:{type:"gems",amount:0,time:0},aiSettings:{}}),[[5,1]].forEach((function(_ref){var _ref2=(0,slicedToArray.Z)(_ref,2),amount=_ref2[0],th=_ref2[1];return buildingStore_buildingStore.setBuildingLimit("builderhut",amount,th)}));[[420,250,"10s",7.2,1],[470,1e3,"2m",8.8,1],[520,4e3,"10m",12,2],[570,16e3,"45m",15.2,3],[620,5e4,"2h",20,4],[670,1e5,"4h",24.8,5],[730,2e5,"8h",32,6],[800,3e5,"10h",38.4,7],[880,5e5,"12h",44.8,8],[960,7e5,"18h",51.2,8],[1060,1e6,"1d",59.2,9]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,5),hitPoints=_ref2[0],cost=_ref2[1],timeStr=_ref2[2],damage=_ref2[3],th=_ref2[4];buildingStore_buildingStore.addBuilding({type:"cannon",categories:["defense"],level:1+lvl,size:[3,3],thRequirement:th,hitPoints:hitPoints,cost:{type:"gold",amount:cost,time:time(timeStr)},triggerRadius:9,aiType:"cannon",aiSettings:{firingRate:.8,damage:damage,unitGroup:"ground"}})})),[[2,1],[3,5],[6,10],[7,11]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("cannon",amount,th)}));[[380,1e3,"1m",5.5,2],[420,2e3,"15m",7.5,2],[460,5e3,"45m",9.5,3],[500,2e4,"3h",12.5,4],[540,8e4,"5h",15,5],[580,18e4,"8h",17.5,5],[630,36e4,"10h",21,6],[690,6e5,"12h",24,7],[750,8e5,"14h",28,8],[810,1e6,"18h",31.5,8],[890,12e5,"1d",35,9]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,5),hitPoints=_ref2[0],cost=_ref2[1],timeStr=_ref2[2],damage=_ref2[3],th=_ref2[4];buildingStore_buildingStore.addBuilding({type:"archertower",categories:["defense"],level:1+lvl,size:[3,3],thRequirement:th,hitPoints:hitPoints,cost:{type:"gold",amount:cost,time:time(timeStr)},triggerRadius:10,aiType:"cannon",aiSettings:{firingRate:.5,damage:damage,unitGroup:"all"}})})),[[1,2],[2,4],[3,5],[4,7],[5,8],[6,9],[7,10],[8,11]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("archertower",amount,th)}));[[450,0,"0s"],[1600,1e3,"10s"],[1850,4e3,"1h"],[2100,25e3,"3h"],[2400,15e4,"6h"],[2800,75e4,"12h"],[3300,1e6,"18h"],[3900,2e6,"1d"],[4600,3e6,"2d"],[5500,35e5,"2d12h"],[6800,4e6,"2d18h"],[7500,6e6,"4d6h"],[8200,9e6,"7d12h"],[8900,15e6,"13d6h"],[9600,18e6,"15d"]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,3),hitPoints=_ref2[0],cost=_ref2[1],timeStr=_ref2[2];buildingStore_buildingStore.addBuilding({type:"townhall",categories:["resource"],level:1+lvl,thRequirement:lvl,size:[4,4],hitPoints:hitPoints,cost:{type:"gold",amount:cost,time:time(timeStr)},aiSettings:{}})})),[[1,1]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("townhall",amount,th)}));[[400,300,"10s",1],[600,750,"5m",2],[800,1500,"20m",2],[1e3,3e3,"1h",3],[1200,6e3,"2h",3],[1400,12e3,"3h",3],[1600,25e3,"4h",4],[1700,5e4,"5h",4],[1800,1e5,"8h",5],[1900,25e4,"12h",6],[2100,5e5,"16h",7]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,4),hitPoints=_ref2[0],cost=_ref2[1],timeStr=_ref2[2],th=_ref2[3];buildingStore_buildingStore.addBuilding({type:"elixirstorage",categories:["resource"],level:1+lvl,size:[3,3],thRequirement:th,hitPoints:hitPoints,cost:{type:"gold",amount:cost,time:time(timeStr)},aiSettings:{}})})),[[1,1],[2,3],[3,8],[4,9]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("elixirstorage",amount,th)}));[[400,300,"10s",1],[600,750,"5m",2],[800,1500,"20m",2],[1e3,3e3,"1h",3],[1200,6e3,"2h",3],[1400,12e3,"3h",3],[1600,25e3,"4h",4],[1700,5e4,"5h",4],[1800,1e5,"8h",5],[1900,25e4,"12h",6],[2100,5e5,"16h",7]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,4),hitPoints=_ref2[0],cost=_ref2[1],timeStr=_ref2[2],th=_ref2[3];buildingStore_buildingStore.addBuilding({type:"goldstorage",categories:["resource"],level:1+lvl,size:[3,3],thRequirement:th,hitPoints:hitPoints,cost:{type:"elixir",amount:cost,time:time(timeStr)},aiSettings:{}})})),[[1,1],[2,3],[3,8],[4,9]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("goldstorage",amount,th)}));[[400,150,"10s",1],[440,300,"1m",1],[480,700,"4m",2],[520,1400,"10m",2],[560,3e3,"40m",3],[600,7e3,"3h",3],[640,14e3,"6h",4],[680,28e3,"8h",4],[720,56e3,"10h",5],[780,75e3,"12h",5],[860,1e5,"16h",7],[960,2e5,"20h",8]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,4),hitPoints=_ref2[0],cost=_ref2[1],timeStr=_ref2[2],th=_ref2[3];buildingStore_buildingStore.addBuilding({type:"elixircollector",categories:["resource"],level:1+lvl,size:[3,3],thRequirement:th,hitPoints:hitPoints,cost:{type:"gold",amount:cost,time:time(timeStr)},aiSettings:{}})})),[[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,9]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("elixircollector",amount,th)}));[[400,150,"10s",1],[440,300,"1m",1],[480,700,"4m",2],[520,1400,"10m",2],[560,3e3,"40m",3],[600,7e3,"3h",3],[640,14e3,"6h",4],[680,28e3,"8h",4],[720,56e3,"10h",5],[780,75e3,"12h",5],[860,1e5,"16h",7],[960,2e5,"20h",8]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,4),hitPoints=_ref2[0],cost=_ref2[1],timeStr=_ref2[2],th=_ref2[3];buildingStore_buildingStore.addBuilding({type:"goldmine",categories:["resource"],level:1+lvl,size:[3,3],thRequirement:th,hitPoints:hitPoints,cost:{type:"elixir",amount:cost,time:time(timeStr)},aiSettings:{}})})),[[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,9]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("goldmine",amount,th)}));[[400,5e3,"3h",20,3],[450,25e3,"6h",25,4],[500,1e5,"12h",30,5],[550,2e5,"1d",35,6],[600,4e5,"2d",45,7],[650,75e4,"2d12h",55,8],[700,15e5,"3h",75,9]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,5),hitPoints=_ref2[0],cost=_ref2[1],timeStr=_ref2[2],damage=_ref2[3],th=_ref2[4];buildingStore_buildingStore.addBuilding({type:"mortar",categories:["defense"],level:1+lvl,size:[3,3],thRequirement:th,hitPoints:hitPoints,cost:{type:"gold",amount:cost,time:time(timeStr)},triggerRadius:11,triggerDeadZone:4,aiType:"mortar",aiSettings:{firingRate:5,damage:damage,unitGroup:"ground",splash:1.5}})})),[[1,3],[2,6],[3,7],[4,8]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("mortar",amount,th)}));[[800,22e3,"3h",80,4],[850,9e4,"12h",110,4],[900,27e4,"16h",140,5],[950,5e5,"1d",160,6],[1e3,1e6,"1d12h",190,7],[1050,135e4,"2d",230,8],[1100,175e4,"3d",280,9]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,5),hitPoints=_ref2[0],cost=_ref2[1],timeStr=_ref2[2],damage=_ref2[3],th=_ref2[4];buildingStore_buildingStore.addBuilding({type:"airdefense",categories:["defense","air-defense"],level:1+lvl,size:[3,3],thRequirement:th,hitPoints:hitPoints,cost:{type:"gold",amount:cost,time:time(timeStr)},triggerRadius:10,aiSettings:{firingRate:1,damage:damage,unitGroup:"air"}})})),[[1,4],[2,6],[3,7],[4,9]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("airdefense",amount,th)}));[[300,50,2],[500,1e3,2],[700,5e3,3],[900,1e4,4],[1400,2e4,5]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,3),hitPoints=_ref2[0],cost=_ref2[1],th=_ref2[2];buildingStore_buildingStore.addBuilding({type:"wall",categories:["wall"],level:1+lvl,size:[1,1],thRequirement:th,hitPoints:hitPoints,cost:{type:"elixir",amount:cost,time:0},aiSettings:{}})})),[[25,2],[50,3],[75,4],[100,5],[125,6],[175,7],[225,8],[250,9],[275,10],[300,11],[325,14]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("wall",amount,th)}));[[500,5e3,"1m",3],[550,25e3,"1h",4],[600,5e4,"2h",5],[650,1e5,"4h",6],[700,2e5,"8h",7],[750,4e5,"16h",8],[830,8e5,"1d",9]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,4),hitPoints=_ref2[0],cost=_ref2[1],timeStr=_ref2[2],th=_ref2[3];buildingStore_buildingStore.addBuilding({type:"laboratory",categories:["army"],level:1+lvl,size:[3,3],thRequirement:th,hitPoints:hitPoints,cost:{type:"elixir",amount:cost,time:time(timeStr)},aiSettings:{}})})),[[1,3]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("laboratory",amount,th)}));[[1e3,1e4,10,"0s",2],[1400,1e5,15,"8h",4],[2e3,8e5,20,"12h",6],[2600,12e5,25,"1d",8],[3e3,25e5,30,"2d",9]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,5),hitPoints=_ref2[0],cost=_ref2[1],capacity=_ref2[2],timeStr=_ref2[3],th=_ref2[4];buildingStore_buildingStore.addBuilding({type:"clancastle",categories:["resource"],level:1+lvl,size:[3,3],thRequirement:th,hitPoints:hitPoints,cost:{type:"elixir",amount:cost,time:time(timeStr)},triggerRadius:13,aiSettings:{capacity:capacity}})})),[[1,2]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("clancastle",amount,th)}));[[20,400,"0s",3],[24,1e3,"6m",3],[29,1e4,"2h",5],[35,1e5,"8h",7],[42,3e5,"18h",8],[54,5e5,"1d12h",9]].forEach((function(_ref,lvl){var _ref2=(0,slicedToArray.Z)(_ref,4),damage=_ref2[0],cost=_ref2[1],timeStr=_ref2[2],th=_ref2[3];buildingStore_buildingStore.addBuilding({type:"bomb",categories:["trap"],level:1+lvl,size:[1,1],thRequirement:th,hitPoints:1,cost:{type:"gold",amount:cost,time:time(timeStr)},triggerRadius:1.5,aiType:"bomb",aiSettings:{damage:damage,unitGroup:"ground",splash:3,firingRate:1.5}})})),[[2,3],[4,5],[6,7],[7,13],[8,14]].forEach((function(_ref3){var _ref4=(0,slicedToArray.Z)(_ref3,2),amount=_ref4[0],th=_ref4[1];return buildingStore_buildingStore.setBuildingLimit("bomb",amount,th)}));var createKeyStore=function createKeyStore(){var initialKeys=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],store={};return{getKey:function getKey(type){var key="";do{store[type]=store[type]||0,store[type]++,key="".concat(type,"#").concat(store[type])}while(initialKeys.includes(key));return key}}},isVisible=function isVisible(building){return!building.categories.some((function(c){return"trap"===c}))},_placeBuilding=function placeBuilding(layout,building){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},layout),{},{items:(0,objectSpread2.Z)((0,objectSpread2.Z)({},layout.items),{},(0,defineProperty.Z)({},building.buildingId,building))})},isOverlapping=function isOverlapping(layout,buildingId){var building=layout.items[buildingId],_building$position=(0,slicedToArray.Z)(building.position,2),x=_building$position[0],y=_building$position[1],_building$info$size=(0,slicedToArray.Z)(building.info.size,2),w=_building$info$size[0],h=_building$info$size[1];return Object.values(layout.items).some((function(element){return element.buildingId!==buildingId&&element.position[0]<x+w&&element.position[0]+element.info.size[0]>x&&element.position[1]<y+h&&element.position[1]+element.info.size[1]>y}))},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),PlacementOutline=function PlacementOutline(_ref){var _classNames,layout=_ref.layout,_ref$mode=_ref.mode,mode=void 0===_ref$mode?"dark":_ref$mode,buildings=Object.entries(layout.items);return(0,jsx_runtime.jsx)("div",{className:classnames_default()(PlacementOutline_module.outlineBox,(_classNames={},(0,defineProperty.Z)(_classNames,PlacementOutline_module.light,"light"===mode),(0,defineProperty.Z)(_classNames,PlacementOutline_module.dark,"dark"===mode),_classNames)),children:buildings.filter((function(_ref2){var buildingsState=(0,slicedToArray.Z)(_ref2,2)[1];return isVisible(buildingsState.info)})).map((function(_ref4){var _ref5=(0,slicedToArray.Z)(_ref4,2),id=_ref5[0],buildingState=_ref5[1],info=buildingState.info;return(0,jsx_runtime.jsx)("div",{style:{"--x":buildingState.position[0],"--y":buildingState.position[1],position:"absolute"},className:classnames_default()(PlacementOutline_module.outline,PlacementOutline_module["size".concat(info.size[0])])},"outline-".concat(id))}))})};try{PlacementOutline.displayName="PlacementOutline",PlacementOutline.__docgenInfo={description:"",displayName:"PlacementOutline",props:{layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"BaseLayout"}},mode:{defaultValue:{value:"dark"},description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"dark"'},{value:'"light"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui-components/composition/Village/PlacementOutline.tsx#PlacementOutline"]={docgenInfo:PlacementOutline.__docgenInfo,name:"PlacementOutline",path:"src/ui-components/composition/Village/PlacementOutline.tsx#PlacementOutline"})}catch(__react_docgen_typescript_loader_error){}var _PlacementOutline$par,_PlacementOutline$par2,_PlacementOutline$par3,Building=__webpack_require__("./src/ui-components/composition/Village/Building.tsx"),Buildings=function Buildings(_ref){var _ref$showHidden=_ref.showHidden,showHidden=void 0!==_ref$showHidden&&_ref$showHidden,layout=_ref.layout,battleBaseData=_ref.battleBaseData,_ref$selection=_ref.selection,selection=void 0===_ref$selection?[]:_ref$selection,buildings=(_ref.showSelectedDetails,Object.entries(layout.items));return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:buildings.filter((function(_ref2){var _ref3=(0,slicedToArray.Z)(_ref2,2),id=_ref3[0],buildingsState=_ref3[1];return showHidden||isVisible(buildingsState.info)||(null==battleBaseData?void 0:battleBaseData[id].visible)})).map((function(_ref4){var _ref5=(0,slicedToArray.Z)(_ref4,2),id=_ref5[0],buildingState=_ref5[1],info=buildingState.info,battleInfo=null==battleBaseData?void 0:battleBaseData[id],hitPoints=battleInfo?battleInfo.hitPoints:info.hitPoints,state=battleInfo?battleInfo.state:"idle";return(0,jsx_runtime.jsx)(Building.N,{x:buildingState.position[0],y:buildingState.position[1],hitPoints:hitPoints,buildingType:info.type,level:info.level,size:info.size[0],state:state,selected:selection.includes(id),overlapping:selection.includes(id)&&isOverlapping(layout,id)},id)}))})};try{Buildings.displayName="Buildings",Buildings.__docgenInfo={description:"",displayName:"Buildings",props:{showHidden:{defaultValue:{value:"false"},description:"",name:"showHidden",required:!1,type:{name:"boolean"}},layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"BaseLayout"}},battleBaseData:{defaultValue:null,description:"",name:"battleBaseData",required:!1,type:{name:"BattleBaseData"}},selection:{defaultValue:{value:"[]"},description:"",name:"selection",required:!1,type:{name:"string[]"}},showSelectedDetails:{defaultValue:{value:"false"},description:"",name:"showSelectedDetails",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui-components/composition/Village/Buildings.tsx#Buildings"]={docgenInfo:Buildings.__docgenInfo,name:"Buildings",path:"src/ui-components/composition/Village/Buildings.tsx#Buildings"})}catch(__react_docgen_typescript_loader_error){}var PlacementOutline_stories={title:"Compositions/Village",component:PlacementOutline,parameters:{layout:"fullscreen"}},PlacementOutline_stories_PlacementOutline={args:{layout:function layoutBuilder(){var layout=function newLayout(){return{gridSize:[arguments.length>0&&void 0!==arguments[0]?arguments[0]:46,arguments.length>1&&void 0!==arguments[1]?arguments[1]:46],items:{}}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:46,arguments.length>1&&void 0!==arguments[1]?arguments[1]:46),keyStore=createKeyStore(),builder={updateWithLayout:function updateWithLayout(baseLayout){return layout=baseLayout,keyStore=createKeyStore(Object.keys(layout.items)),builder},placeBuilding:function placeBuilding(type,level,position,buildingId){var building=buildingStore_buildingStore.getBuilding(type,level);if(!building)return builder;var id=null!=buildingId?buildingId:keyStore.getKey(type);return layout=_placeBuilding(layout,{info:building,position:position,buildingId:id}),builder},moveBuilding:function moveBuilding(buildingId,newPosition){return layout=function moveBuilding(layout,buildingId,newPosition){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},layout),{},{items:(0,objectSpread2.Z)((0,objectSpread2.Z)({},layout.items),{},(0,defineProperty.Z)({},buildingId,(0,objectSpread2.Z)((0,objectSpread2.Z)({},layout.items[buildingId]),{},{position:newPosition})))})}(layout,buildingId,newPosition),builder},removeBuilding:function removeBuilding(buildingId){return layout=function removeBuilding(layout,buildingId){var result=(0,objectSpread2.Z)((0,objectSpread2.Z)({},layout),{},{items:(0,objectSpread2.Z)({},layout.items)});return delete result.items[buildingId],result}(layout,buildingId),builder},moveAll:function moveAll(deltaX,deltaY){return Object.values(layout.items).forEach((function(building){building.position[0]+=deltaX,building.position[1]+=deltaY})),builder},result:function result(){return layout}};return builder}().placeBuilding("townhall",2,[20,20]).placeBuilding("armycamp",2,[25,21]).placeBuilding("bomb",1,[12,12]).result()},decorators:[function(Story,context){return(0,jsx_runtime.jsxs)(Grid.rj,{width:context.args.layout.gridSize[0],height:context.args.layout.gridSize[1],children:[(0,jsx_runtime.jsx)(Story,{}),(0,jsx_runtime.jsx)(Buildings,{layout:context.args.layout,showHidden:!0})]})}]};PlacementOutline_stories_PlacementOutline.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},PlacementOutline_stories_PlacementOutline.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_PlacementOutline$par=PlacementOutline_stories_PlacementOutline.parameters)||void 0===_PlacementOutline$par?void 0:_PlacementOutline$par.docs),{},{source:(0,objectSpread2.Z)({originalSource:'{\n  args: {\n    layout: layoutBuilder().placeBuilding("townhall", 2, [20, 20]).placeBuilding("armycamp", 2, [25, 21]).placeBuilding("bomb", 1, [12, 12]).result()\n  },\n  decorators: [(Story, context) => <Grid width={context.args.layout.gridSize[0]} height={context.args.layout.gridSize[1]}>\n        <Story />\n        <Buildings layout={context.args.layout} showHidden />\n      </Grid>]\n}'},null===(_PlacementOutline$par2=PlacementOutline_stories_PlacementOutline.parameters)||void 0===_PlacementOutline$par2||null===(_PlacementOutline$par3=_PlacementOutline$par2.docs)||void 0===_PlacementOutline$par3?void 0:_PlacementOutline$par3.source)})});var __namedExportsOrder=["PlacementOutline"]},"./src/ui-components/composition/Village/Building.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{N:function(){return Building}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),Building_module={ground:"Building_ground__PK5fN",selected:"Building_selected__Bo72o",overlapping:"Building_overlapping__GqqLV",building:"Building_building__zBQXG",size1:"Building_size1__GVxRe",attacking:"Building_attacking__LPaLB",attackBuilding:"Building_attackBuilding__NSe0S",overlapBuilding:"Building_overlapBuilding__L8C2o",destroyed:"Building_destroyed__nxsTS",elixirstorage:"Building_elixirstorage__ffL18",elixircollector:"Building_elixircollector__HJcgy",goldmine:"Building_goldmine__GZTmA",goldstorage:"Building_goldstorage__vjLya",townhall:"Building_townhall__jPETY",cannon:"Building_cannon__bQz3N",mortar:"Building_mortar__AObK5",archertower:"Building_archertower__XOS9Q",airdefense:"Building_airdefense__R2jiu",wall:"Building_wall__6PBMR"},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Building=function Building(_ref){var _classNames,_classNames2,x=_ref.x,y=_ref.y,size=_ref.size,className=_ref.className,hitPoints=_ref.hitPoints,level=_ref.level,buildingType=_ref.buildingType,state=_ref.state,selected=_ref.selected,overlapping=_ref.overlapping;return(0,jsx_runtime.jsx)("div",{style:{"--x":x,"--y":y,"--size":size},className:classnames_default()(Building_module.ground,(_classNames={},(0,defineProperty.Z)(_classNames,Building_module.selected,selected&&!overlapping),(0,defineProperty.Z)(_classNames,Building_module.overlapping,overlapping&&selected),_classNames)),children:(0,jsx_runtime.jsxs)("div",{className:classnames_default()((_classNames2={},(0,defineProperty.Z)(_classNames2,Building_module.destroyed,0===hitPoints),(0,defineProperty.Z)(_classNames2,Building_module[null!=state?state:"none"],state),(0,defineProperty.Z)(_classNames2,Building_module[buildingType],Building_module[buildingType]),(0,defineProperty.Z)(_classNames2,"".concat(className),className),(0,defineProperty.Z)(_classNames2,Building_module.overlapping,overlapping),_classNames2),Building_module.building,Building_module["size".concat(size)]),children:[buildingType," ",level," ",hitPoints]})})};try{Building.displayName="Building",Building.__docgenInfo={description:"",displayName:"Building",props:{x:{defaultValue:null,description:"",name:"x",required:!0,type:{name:"number"}},y:{defaultValue:null,description:"",name:"y",required:!0,type:{name:"number"}},size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},buildingType:{defaultValue:null,description:"",name:"buildingType",required:!0,type:{name:"string"}},level:{defaultValue:null,description:"",name:"level",required:!0,type:{name:"number"}},hitPoints:{defaultValue:null,description:"",name:"hitPoints",required:!0,type:{name:"number"}},state:{defaultValue:null,description:"",name:"state",required:!1,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},overlapping:{defaultValue:null,description:"",name:"overlapping",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui-components/composition/Village/Building.tsx#Building"]={docgenInfo:Building.__docgenInfo,name:"Building",path:"src/ui-components/composition/Village/Building.tsx#Building"})}catch(__react_docgen_typescript_loader_error){}},"./src/ui-components/composition/Village/Grid.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{rj:function(){return Grid}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),Grid_module_scrollContainer="Grid_scrollContainer__fn6VR",Grid_module_scrollable="Grid_scrollable__pMnbC",Grid_module_rotationContainer="Grid_rotationContainer__-y0BG",Grid_module_grid="Grid_grid__D4ak3",Grid_module_tilted="Grid_tilted__+V9nI",react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["width","height","scrollable","children"],Grid=(Math.PI,function Grid(_ref){var width=_ref.width,height=_ref.height,_ref$scrollable=_ref.scrollable,scrollable=void 0===_ref$scrollable||_ref$scrollable,children=_ref.children,eventHandlers=(0,objectWithoutProperties.Z)(_ref,_excluded),fieldRef=(0,react.useRef)(null);return(0,react.useEffect)((function(){if(fieldRef.current&&fieldRef.current.parentElement){var scrollContainer=fieldRef.current.parentElement,rect=scrollContainer.getBoundingClientRect(),scrollWidth=scrollContainer.scrollWidth,scrollHeight=scrollContainer.scrollHeight;scrollContainer.scroll({top:scrollHeight/2-rect.height/2,left:scrollWidth/2-rect.width/2})}}),[]),(0,jsx_runtime.jsx)("div",{className:classnames_default()(Grid_module_scrollContainer,(0,defineProperty.Z)({},Grid_module_scrollable,scrollable)),children:(0,jsx_runtime.jsx)("div",{className:Grid_module_rotationContainer,ref:fieldRef,children:(0,jsx_runtime.jsx)("div",{className:Grid_module_tilted,children:(0,jsx_runtime.jsx)("div",(0,objectSpread2.Z)((0,objectSpread2.Z)({style:{width:15*(width-3-3),height:15*(height-3-3)},className:Grid_module_grid},eventHandlers),{},{children:children}))})})})});try{Grid.displayName="Grid",Grid.__docgenInfo={description:"",displayName:"Grid",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},scrollable:{defaultValue:{value:"true"},description:"",name:"scrollable",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseMove:{defaultValue:null,description:"",name:"onMouseMove",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseUp:{defaultValue:null,description:"",name:"onMouseUp",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onTouchStart:{defaultValue:null,description:"",name:"onTouchStart",required:!1,type:{name:"TouchEventHandler<HTMLDivElement>"}},onTouchMove:{defaultValue:null,description:"",name:"onTouchMove",required:!1,type:{name:"TouchEventHandler<HTMLDivElement>"}},onTouchEnd:{defaultValue:null,description:"",name:"onTouchEnd",required:!1,type:{name:"TouchEventHandler<HTMLDivElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui-components/composition/Village/Grid.tsx#Grid"]={docgenInfo:Grid.__docgenInfo,name:"Grid",path:"src/ui-components/composition/Village/Grid.tsx#Grid"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var f=__webpack_require__("./node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l,exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")}}]);